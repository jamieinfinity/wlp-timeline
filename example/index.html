<!DOCTYPE html>
<html>
<head>
    <title>wlp-timeline</title>
    <script type="text/javascript" src="./build/wlp-timeline.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <link href="build/wlp-timeline.css" rel="stylesheet" type="text/css"/>
    <style>
        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            width: auto;
            margin-top: 40px;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>

<body>
<div id="rootdiv"></div>
</body>

<script type="text/javascript">

    wlp_timeline.makeTimeline("#rootdiv", 1200, 180, feed=>{});

    const stepsData = [];
    const stepsTrendData = [];
    const stepsGranularData = [];

    d3.csv('./fitness_data.csv', function (error, data_daily) {

        data_daily.forEach(function (d) {
            let tempdate = new Date(d['Date']);
            let tempdate2 = new Date(tempdate.toDateString());
            stepsData.push({'timestamp': tempdate2, 'measurementValue': Number(d['Steps'])});
            stepsTrendData.push({'timestamp': tempdate2, 'measurementValue': Number(d['StepsSmoothed7Days'])});
        });

        d3.csv('./steps_granular.csv', function (error, data_minutes) {

            data_minutes.forEach(function (d) {
                let tempdate = new Date(d['datetime']);
                let tempdate2 = new Date(tempdate.toString());
                stepsGranularData.push({'timestamp': tempdate2, 'measurementValue': Number(d['steps'])});
            });

            wlp_timeline.addFeed({
                'feedInfo': {
                    'feedId': 'steps',
                    'measurementLabel': 'Steps',
                    'measurementTimespan': 1,
                    'measurementMinimum': 0,
                },
                'data': stepsGranularData,
                'trendData': stepsGranularData
            });

        });

    });



</script>

</html>


<!--date-->
<!--timeSpan-->
<!--measurementValue-->
<!--measurementLabel-->
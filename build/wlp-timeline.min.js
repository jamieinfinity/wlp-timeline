!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("wlp-timeline",["exports"],e):e(t.wlp_timeline={})}(this,function(t){"use strict";function e(t,e,n,i,a,r,o,s){return d3.time.format.multi([[t,function(t){return t.getMilliseconds()}],[e,function(t){return t.getSeconds()}],[n,function(t){return t.getMinutes()}],[i,function(t){return t.getHours()}],[a,function(t){return t.getDay()&&1!=t.getDate()}],[r,function(t){return 1!=t.getDate()}],[o,function(t){return t.getMonth()}],[s,function(){return!0}]])}function n(t,e,n,i,a){return d3.svg.axis().scale(t).tickFormat(e).orient(n).tickSize(i).tickPadding(a)}function i(t,i){D=d3.time.scale().domain([t,i]).range([0,p]);var a=e(".%L",":%S","%_I:%M","%_I %p","%b %-d","%b %-d","%b","%Y"),r=e(" "," "," "," ","%a","%a","%a"," ");y=n(D,a,"bottom",-_,6),w=n(D,r,"bottom",-_,18),v=n(D,"","bottom",-_,0).ticks(d3.time.days,1),b=n(D,"","bottom",-_,0).ticks(d3.time.weeks,1),k=n(D,"","bottom",0,0).ticks(d3.time.years,1)}function a(){var t=D.invert(0),e=D.invert(p);return(e.getTime()-t.getTime())/1e3/3600/24}function r(t,e,n){n>0&&a()>n?h.select(t).call(k):h.select(t).call(e)}function o(){S&&d(),r(".x.axisMain",y,0),r(".x.axis-day-names",w,60),r(".x.axis-days",v,60),r(".x.axis-weeks",b,60)}function s(t,e,n){t.append("g").attr("class",e).attr("transform","translate(0,"+n+")")}function c(t,e){p=e-T.left-T.right;var n=new Date("Jan 1, 2016"),a=new Date;i(n,a),M=d3.behavior.zoom().x(D).scaleExtent([-3e3,3e3]).on("zoom",function(){o()});var r=20;d3.select(t).style("font-family","Avenir").style("font-size","10px").style("top",r+"px").style("bottom",r+"px").style("left",r+"px").style("right",r+"px").style("position","absolute"),m=d3.select(t).append("svg").attr("width",p+T.left+T.right).attr("height",_+T.top/2+T.bottom),h=m.append("g").attr("pointer-events","none").attr("transform","translate("+T.left+","+T.top/2+")"),s(h,"x axisMain",_),s(h,"x axis-day-names",_),s(h,"x axis-days",_),s(h,"x axis-weeks",_),o(),x=m.append("svg").attr("vector-effect","non-scaling-stroke").attr("width",p).attr("height",_).attr("x",T.left).attr("y",T.top/2).attr("viewBox","0 0 "+p+" "+_).call(M),x.append("rect").attr("fill","white").attr("fill-opacity",0).attr("width",p).attr("height",_).attr("class","innertimelinebackground"),g=m.append("g").attr("pointer-events","none").attr("transform","translate("+T.left+","+T.top/2+")"),g.append("rect").attr("fill","white").attr("fill-opacity",0).attr("width",p).attr("height",_).attr("stroke","#eee").attr("stroke-width",3).attr("class","outertimelinebackground")}function l(t){return t.attr("r",5).attr("fill","#555")}function f(t){t.attr("cy",_/2).attr("cx",function(t){return D(t)})}function d(){var t=z.selectAll("circle").data(S);l(t.enter().append("circle")),f(t),t.exit().remove()}function u(t){S=t,z=x.append("g"),d()}var p,m,x,g,h,y,v,b,w,k,D,M,z,S,T={top:20,right:20,bottom:30,left:20},_=70-T.top-T.bottom,A="0.0.1";t.version=A,t.drawTimeline=c,t.addData=u});